function addMarker(o){var e=new google.maps.Marker({position:new google.maps.LatLng(o.lat,o.lng),icon:{url:"img/airplane-"+o.icon+".png",size:o.iconsize,origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,32),scaledSize:o.iconsize},title:o.airport});return e.setMap(map),e.setVisible(!0),e}function addInfoWindow(o){var e=o.airport,a='<div class="infowindowcontent"><div class="row"><p class="total '+e.icon+'bk">'+Math.round(10*e.totalper)/10+'%</p><p class="location">'+e.airport.split("(")[0].substring(0,19)+'</p><p class="code">'+e.code+'</p></div><div class="data"><p class="tagbelow">Avg On-Time</p><p class="label">Arrivals</p><p class="details">'+e.aper+"% ("+numberWithCommas(e.aop)+')</p><p class="label">Departures</p><p class="details">'+e.dper+"% ("+numberWithCommas(e.dop)+')</p><p class="coords">'+e.lat+" , "+e.lng+"</p></div></div>";google.maps.event.addListener(o,"click",function(e){infoWindow.close(),infoWindow.setContent(a),infoWindow.open(map,o)})}function loadMap(){var o={zoom:4,center:new google.maps.LatLng(39.828127,-98.579404),mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.TERRAIN],position:google.maps.ControlPosition.TOP_RIGHT},mapTypeId:google.maps.MapTypeId.TERRAIN,tilt:30,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_TOP},panControl:!0,panControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},streetViewControl:!0,overviewMapControl:!0,overviewMapControlOptions:{opened:!0}},e=document.getElementById("gmap");map=new google.maps.Map(e,o);for(var a=0;a<airportData.length;a++){var t=airportData[a];t.totalper=(t.aper+t.dper)/2,t.totalflights=t.aop+t.dop,t.totalflights>1e4?t.iconsize=new google.maps.Size(48,48):1e3<=t.totalflights&&t.totalflights<=1e4?t.iconsize=new google.maps.Size(32,32):t.totalflights<1e3&&(t.iconsize=new google.maps.Size(16,16)),t.icon=t.totalper>=80?"green":70<=t.totalper&&t.totalper<80?"yellow":60<=t.totalper&&t.totalper<70?"orange":"red";var l=this.addMarker(t);l.airport=t,addInfoWindow(l)}}function numberWithCommas(o){return o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var map,infoWindow=new google.maps.InfoWindow,mapStyle=[{stylers:[{saturation:-100},{gamma:1}]},{elementType:"labels.text.stroke",stylers:[{visibilty:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{visibilty:"simplified"}]},{featureType:"water",stylers:[{visibilty:"on"},{saturation:50},{gamma:0},{hue:"#50a5d1"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#e2e2e2"}]}];google.maps.event.addDomListener(window,"load",loadMap());